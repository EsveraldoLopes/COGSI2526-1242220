Vagrant.configure("2") do |config|
  config.vm.box = "bento/ubuntu-22.04"
  config.vm.hostname = "tp7-ex1"

  # Tempo extra de boot — evita erro de timeout
  config.vm.boot_timeout = 600  # 10 minutos de espera

  # Provider condicional via variável de ambiente VAGRANT_PROVIDER
  if ENV['VAGRANT_PROVIDER'] == 'virtualbox'
    config.vm.provider :virtualbox do |vb|
      vb.memory = "1024"
      vb.cpus   = 2
    end
  elsif ENV['VAGRANT_PROVIDER'] == 'vmware_desktop'
    config.vm.provider :vmware_desktop do |vmw|
      vmw.memory = "2048"
      vmw.cpus   = 4
    end
  else
    # fallback: VirtualBox com valores modestos
    config.vm.provider :virtualbox do |vb|
      vb.memory = "768"
      vb.cpus   = 1
    end
  end
end

